<!DOCTYPE html>
<html lang="en">
	
<!-- Meta meta -->
<meta charset="utf-8">
<title>Combining Jekyll With Focal Point CSS Adaptive Images For Smart Thumbnail Images</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="Jan Dennison">
<meta name="robots" content="" />
<meta name="description" content="How I used Focal Point with Jekyll to create pure CSS Adaptive Post Thumbnails" />
<link rel="canonical" href="/combining-jekyll-with-focal-point-css-adaptive-images-for-smart-thumbnails" />

<!-- The Links -->
<link rel="shortcut icon" href="/favicon.ico">
<link href="/css/main.css" rel="stylesheet">

<!-- Link placeholder to change stylesheets -->
<link class="style" href="#" rel="stylesheet">
<!-- Fonts -->
<link href='http://fonts.googleapis.com/css?family=Numans|Scada:400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Average' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/fontello.css">
<!-- Highlight Code Syntax -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">

		<body class="post">
			<header>
    <!-- <div class="geometric"></div> -->
    <nav>
  <ul class="short">
    <li><a href="http://jannypie.github.io#intro">Introduction</a></li>
    <li><a href="http://jannypie.github.io#writings">Writings</a></li>
    <li><a href="http://jannypie.github.io#works">Works</a></li>
  </ul>
  <ul class="expanded">
    <li><a href="/#intro">Introduction</a></li>
    <li><a href="http://jannypie.github.io/blog">DevBootcamp Blog</a></li>
    <li>Web Works:
      <ul>
        <li><a href="http://codepen.io/jannypie/pen/kbdDg" title="Taj Majal code sample on codepen">Pure CSS Taj Mahal</a></li>
        <li><a href="http://codepen.io/jannypie/pen/lFysn" title="Bridge code sample on codepen">Pure CSS Golden Gate</a></li>
        <li><a href="http://codepen.io/jannypie/pen/DcHdo" title="Quizzie in CSS/JS">Quizzie in CSS/JS</a></li>
      </ul>
    </li>
    <li>Art Works:
      <ul>
        <li><a href="/art-portfolio/verisimilitude-sylva/">Verisimilitude Sylva</a></li>
        <li><a href="/art-portfolio/wanderlust/">Wanderlust</a></li>
      </ul>
    </li>
  </ul>
</nav>
    <h1>
      <a href="http://jannypie.github.io" rel="bookmark" title="Website for Jan Dennison">Jan Dennison</a>
    </h1>
    <p>Front End Developer</p>
</header>
			<main class="container">
				<article>
					<h1> Combining Jekyll With Focal Point CSS Adaptive Images For Smart Thumbnail Images </h1>
					<span class="meta"> July 29, 2013 </span>
					<h2 id="introduction">Introduction</h2>

<p><a href="http://designshack.net/articles/css/focal-point-intelligent-cropping-of-responsive-images/" title="Focal Point: Intelligent Cropping of Responsive Images">Focal Point: Intelligent Cropping of Responsive Images</a> is an excellent article on <a href="http://designshack.net" title="design shack">design shack</a> introducing <a href="http://www.cdnconnect.com/docs/focal-point-css/pure-html-css-responsive-high-resolution-images-solution" title="Focal Point Documentation">Focal Point CSS</a>, a project on GitHub by <a href="https://github.com/adamdbradley/focal-point#readme" title="Adam Bradley Focal Point">Adam Bradley</a> that sets up a small collection of CSS classes designed to crop images while keeping a focal area in view. This is a great solution to simple resizing of images to create smaller thumbnails without losing the important part of the picture. </p>

<p>Take for example my doodle here of some flowers. The basic setup for CSSing a thumbnail would be to wrap the image in a div with a fixed size and overflow set to hidden:</p>

<pre><code>&lt;div class="post-thumbnail"&gt;&lt;img alt="Image for {{ post.title }}" src="{{ post.image }}"&gt;&lt;/div&gt;

.post-thumbnail {
  height: 12em;
  overflow: hidden;
}

.post-thumbnail img {
  width: 100%;
}
</code></pre>

<p>However, this top-aligns my image with the div, and the flowers below get cut off. Not so pretty. </p>

<p><img src="/assets/post-images/focal-point-before.png" alt="Basic Flower Thumbnail" /></p>

<p>I had come across some online posts about cropping image thumbnails using CSS, and wanted to go back to those and find a more advanced solution. Thus, I came across Focal Point. I’ll let you read the details if you wish, but the basic concept is that Focal Point defines classes that apply negative margins to your image based on where you want the focus to be. For each image, simply add one of the Focal Point classes for horizontal offset and another for vertical, and it will not only use negative margins to make that area you define as the focus, but because they are all based on percentages, it’s also responsive.</p>

<p>The basic structure for using Focal Point is an image wrapped in two divs. To use the example from <a href="http://designshack.net/articles/css/focal-point-intelligent-cropping-of-responsive-images/" title="Focal Point: Intelligent Cropping of Responsive Images">the design shack post</a>:</p>

<pre><code>&lt;div class="focal-point right-3 up-3"&gt;
  &lt;div&gt;&lt;img src="guy.jpg" alt="guy"&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>Here you can see that the container div has three important classes: .focal-point center the image, .right-3 (horizontal), and .up-3 (vertical). Super straightforward. These are all you need for landscape oriented images. For portraits, you also need to add a .portrait class to your image.</p>

<h2 id="the-challenge">The Challenge</h2>

<p>My question was: could I still use Focal Point on my Jekyll-based blog, which generates a static page of blog posts using a loop? Because it’s using a loop to generate the post content couched in HTML, I would have to <strong>build</strong> the site after each post, and then go in and add the correct classes by hand to the markup - every time, for every image - and the classes would be different for every image. And nobody got time for that. Here is my loop:</p>

<pre><code>{% for post in site.posts limit:4 %}
    &lt;div class="row-fluid featured-post"&gt;
        &lt;h2&gt; &lt;a href="{{ post.url }}" rel="bookmark" title="Permanent link to {{ post.title }}"&gt;{{ post.title }}&lt;/a&gt; &lt;/h2&gt;
        &lt;div class="row-fluid"&gt;&lt;!-- post content --&gt;
            &lt;div class="post-info row-fluid span5"&gt;
                &lt;span class="meta"&gt; {{ post.date | date: '%B' }} {{ post.date | date: '%e' }}, {{ post.date | date: '%Y' }} &lt;/span&gt;
                &lt;p&gt; {{ post.excerpt }} &lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="row-fluid span6"&gt;
                &lt;div class="post-thumbnail"&gt;
                    &lt;a href="{{ post.url }}" rel="bookmark" title="Permanent link to {{ post.title }}"&gt;
                        &lt;img alt="Image for {{ post.title }}" src="{{ post.image }}"&gt;
                    &lt;/a&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;&lt;!-- end content --&gt;
    &lt;/div&gt;&lt;!-- end row --&gt;
{% endfor %} 
</code></pre>

<p>The basic structure of which is:</p>

<pre><code>loop through the posts, and for each post
    div
        title
        left column
        	date
        	excerpt
        right column
        	image
    /div
end loop
</code></pre>

<p>I wondered if there was a way to define the necessary classes beforehand in the body of the post and then pass those to the loop to be included in the markup.</p>

<h2 id="the-solution">The Solution</h2>

<p>The answer to the question was actually very simple - using <a href="http://blog.omgmog.net/post/adding-more-post-metadata-to-jekyll-with-yaml/" title="Adding More Post Metadata to Jekyll With YAML">custom YAML key:value pairs</a> in the head of each post to define the focal point of the image, and then applying Liquid output structure to pass them to the markup. I defined three custom variables (horizontal, vertical, and orientation) in the YAML front matter of each post:</p>

<pre><code>---
layout: "post" 
title: "Combining Jekyll With Focal Point CSS Adaptive Images For Smart Thumbnails" 
image: "/assets/post-images/IMG_0746.jpg"
focal-vert: down-6
focal-horz: right-3
orientation: portrait
---
</code></pre>

<p>Then, using our Liquid templating variables, I set the value of each pair as a class in the loop markup: </p>

<pre><code>&lt;div class="post-thumbnail focal-point {{ post.orientation }} {{ post.focal-horz }} {{ post.focal-vert }}"&gt;
        &lt;div&gt;&lt;img alt="Image for {{ post.title }}" src="{{ post.image }}"&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>Which results in markup for this image: </p>

<pre><code>&lt;div class='post-thumbnail focal-point portrait left-1 down-6'&gt;
    &lt;div&gt;&lt;img alt='Image for Combining Jekyll With Focal Point CSS Adaptive Images For Smart Thumbnails' src='/assets/post-images/IMG_0746.jpg' /&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>And here is the side-by-side image again for comparison: </p>

<p><img src="/assets/post-images/focal-point-image.png" alt="Focal Point comparison" /></p>

<p>I do again highly recommend the design shack post for further reading, because the author Joshua Johnson does a great job of explaining how the whole grid works for selecting focus areas. </p>


				</article>
			</main><!-- /container -->
			<footer>
<a class="icon-twitter social" href="http://twitter.com/jannypie"><span class="accessible">Twitter</span></a> <a class="icon-github social" href="http://github.com/jannypie"><span class="accessible">GitHub</span></a> <a class="icon-linkedin social" href="http://linkedin.com/in/jldennison/"><span class="accessible">LinkedIn</span></a>
</footer>

<!-- The jQuery and scripts -->
<script type="text/javascript" src="/js/jquery-ui/js/jquery-1.9.1.js"></script>
<script type="text/javascript" src="/js/main.js"></script>
<!-- Highlight Code Syntax -->
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
		</body>
</html>